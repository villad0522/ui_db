[{"functionId":"test","functionNameJP":"テストコード","functionNameEN":"test","beforeCode":"","innerCode":"\n","afterCode":"","parametersName":[],"parametersDataType":[],"returnValue":"void"},{"functionNameJP":"プログラム起動","functionNameEN":"startUp","parametersName":["localUrl","isDebug"],"parametersDataType":["string_nullable","boolean"],"returnValue":"void","functionId":"01HM7FQ083RSS684W5XGB8R40N","beforeCode":"\n","innerCode":"\n  await startUp( localUrl, isDebug );   // 下層の関数を呼び出す\n  //\n  // テーブルを作成する（見出しの役割を果たすカラムを登録するため）\n  await reserveWord(\"title_columns\"); // 予約語に登録\n  await runSqlWriteOnly(\n    `CREATE TABLE IF NOT EXISTS title_columns (\n      table_id TEXT PRIMARY KEY,\n      title_column_id TEXT NOT NULL\n    );`,\n    {},\n  );\n  await _reload();    // メモリに再読み込み\n","afterCode":""},{"functionNameJP":"見出しの役割を果たすカラムを登録する","functionNameEN":"setTitleColumn","parametersName":["columnId"],"parametersDataType":["string"],"returnValue":"void","functionId":"01HM7M00KTFH23Z4RECAY2AMBC","beforeCode":"\n\nlet cacheData = {};\n\n//【サブ関数】メモリに再読み込み\nasync function _reload() {\n  const matrix = await runSqlReadOnly(\n    `SELECT\n      table_id AS tableId,\n      title_column_id AS titleColumnId\n    FROM title_columns;`,\n    {},\n  );\n  cacheData = {};\n  for( const { tableId, titleColumnId } of matrix ){\n    cacheData[tableId] = titleColumnId;\n  }\n}\n\n","innerCode":"\n  await runSqlWriteOnly(\n    `INSERT INTO title_columns ( table_id, title_column_id )\n        VALUES ( :tableId, :titleColumnId );`,\n    {\n        \":tableId\": tableId,\n        \":titleColumnId\": columnId,   // 見出しの役割を果たすカラム\n    },\n  );\n  await _reload();    // メモリに再読み込み\n","afterCode":""},{"functionNameJP":"見出しの役割を果たすカラムを取得する","functionNameEN":"getTitleColumnId","parametersName":["tableId"],"parametersDataType":["string"],"returnValue":"string_nullable","functionId":"01HM7M34J2KAE6H940PW4GA1AC","beforeCode":"\n\n","innerCode":"\n  return cacheData[tableId];\n","afterCode":""},{"functionNameJP":"テーブルの一覧を取得(重)","functionNameEN":"listTables","parametersName":["pageNumber","onePageMaxSize","isTrash"],"parametersDataType":["number","number","boolean"],"returnValue":{"tables":[{"id":"string","name":"string","titleColumnId":"string"}],"total":"number"},"functionId":"01HM7N3XJQ87DAQCG0P7C5SGFH","beforeCode":"\n\n","innerCode":"\n  // 下層の関数を実行する\n  const { tables, total } = await listTables( pageNumber, onePageMaxSize, isTrash );\n  // 下層から得たテーブルの一覧に、「titleColumnId」を付け加えて上層に提供する\n  for( let i=0; i<tables.length; i++ ){\n    const tableId = tables[0].id;\n    tables[0].titleColumnId = cacheData[tableId];\n  }\n  return {\n    \"tables\": tables,\n    \"total\": total,\n  }\n","afterCode":""},{"functionNameJP":"不可逆的にテーブルを削除","functionNameEN":"deleteTable","parametersName":["tableId"],"parametersDataType":["string"],"returnValue":"string","functionId":"01HM7S0XSJJQHMF5SNQBG82WZF","beforeCode":"\n\n","innerCode":"\n    await runSqlWriteOnly(\n        `DELETE FROM title_columns\n            WHERE table_id = :tableId;`,\n        {\n            \":tableId\": tableId,\n        },\n    );\n    await _reload();    // メモリに再読み込み\n    return await deleteTable( tableId );  // 下層の関数を実行する\n","afterCode":""},{"functionNameJP":"インメモリキャッシュを削除する","functionNameEN":"clearCache","parametersName":[],"parametersDataType":[],"returnValue":"void","functionId":"01HM821CE6BNJ31KCEBND5WKMA","beforeCode":"\n\n","innerCode":"\n    await _reload();    // メモリに再読み込み\n    return await clearCache();   // 下層の関数を呼び出す\n","afterCode":""}]