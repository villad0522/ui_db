[{"functionId":"test","functionNameJP":"テストコード","functionNameEN":"test","beforeCode":"","innerCode":"\n","afterCode":"","parametersName":[],"parametersDataType":[],"returnValue":"void"},{"functionNameJP":"HTMLを再生成","functionNameEN":"regenerateHTML","parametersName":["pageId"],"parametersDataType":["number"],"returnValue":"string","functionId":"01HNHX1W0XC2R99932WF1MXHJJ","beforeCode":"\n\n\n","innerCode":"\n    //\n    // ページの情報を取得する\n    const { pageName, memo } = await getPageInfo( pageId );\n    //\n    // パンくずリストを取得する\n    const breadcrumbs = await getBreadcrumbs( pageId );\n    let parentPageId = null;\n    if( breadcrumbs.length >= 2 ){\n        parentPageId = breadcrumbs[breadcrumbs.length-2].pageId;\n    }\n    //\n    // 子ページの一覧\n    const staticChildren = await listStaticChildren( pageId );\n    //\n    // ビューの一覧\n    const views = await listChildrenView( pageId );\n    //\n    //\n    let mainHtmlText = `<!DOCTYPE html>\n<html lang=\"ja\">\n\n    <head>\n        <meta charset=\"utf-8\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, shrink-to-fit=no\">\n        <title>${pageName}</title>\n        <!--  -->\n        <!-- bootstrap5.3を読み込む -->\n        <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM\" crossorigin=\"anonymous\">\n        <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz\" crossorigin=\"anonymous\"></script>\n        <!-- bootstrapのドキュメントはこちら -->\n        <!-- https://getbootstrap.jp/docs/5.3/getting-started/introduction/ -->\n        <!--  -->\n        <!--  -->\n        <!-- bootstrapのアイコンを読み込む -->\n        <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css\">\n        <!--  -->\n        <!-- 自作CSSを読み込む -->\n        <link rel=\"stylesheet\" href=\"./style.css\" type=\"text/css\">\n        <!--  -->\n        <!-- 自作JavaScriptを読み込む -->\n        <script src=\"./script.js\" type=\"module\"></script>\n    </head>\n\n    <body>\n        <nav class=\"navbar navbar-dark bg-primary\">\n            <div class=\"container-fluid\">\n                <button ${ parentPageId ? \"\" : \"disabled\" } onclick=\"jumpWithQuery('/custom/${parentPageId}/index.html')\" type=\"button\" class=\"btn btn-light me-2\">\n                    戻る\n                </button>\n                <div class=\"d-flex\" role=\"search\" style=\"width: 270px;\">\n                    <div class=\"input-group\">\n                        <span class=\"input-group-text\" style=\"background: none; color: #fff;\">\n                            <i class=\"bi bi-search\"></i>\n                        </span>\n                        <input class=\"form-control search_box\" type=\"search\" placeholder=\"検索\" aria-label=\"Search\">\n                    </div>\n                </div>\n                <div class=\"form-check form-switch d-none d-md-inline\">\n                    <input onchange=\"handleEditSwitch(event)\" class=\"form-check-input\" type=\"checkbox\" role=\"switch\" id=\"edit_mode_switch\">\n                    <label class=\"form-check-label\" for=\"edit_mode_switch\" style=\"color:#fff\">\n                        表示設定\n                    </label>\n                </div>\n                <button type=\"button\" class=\"btn btn-success d-none d-md-inline\" style=\"border: solid 2px #fff;\">\n                    Excel\n                </button>\n                <a href=\"/default/tables/index.html\" class=\"btn btn-dark me-2 d-none d-md-inline\" target=\"_blank\">\n                    本体データ\n                    &nbsp;\n                    <i class=\"bi bi-box-arrow-up-right\"></i>\n                </a>\n            </div>\n        </nav>\n        <nav aria-label=\"breadcrumb\">\n            <!-- パンくずリストをクリックすると、クエリパラメータ―を維持したまま別のページへジャンプする -->\n            <ol class=\"breadcrumb\">${ _getBreadcrumbHTML({ breadcrumbs, pageId }) }\n            </ol>\n        </nav>\n        <main class=\"container\">\n            <!--  -->\n            <!--  -->\n            <!-- 見出し -->\n            <h1>${ await  escapeHTML_core( pageName ) }</h1>\n            <!--  -->\n            <!--  -->\n            <!-- メモ -->\n            <textarea class=\"form-control-plaintext\" readonly>${ await  escapeHTML_core( memo ) }</textarea>\n            <!--  -->\n            <!--  -->\n            <!-- 子ページへのリンクここから -->\n            <div style=\"display: flex; flex-wrap: wrap; justify-content: space-around;\">\n                <!-- 正方形のアイコンをクリックすると、クエリパラメータ―を維持したまま別のページへジャンプする -->`;\n    //\n    for( const { pageId, pageName } of staticChildren ){\n        mainHtmlText += `\n                <div class=\"tile\" onclick=\"jumpWithQuery('/custom/${pageId}/index.html')\">\n                    ${pageName}\n                </div>`;\n    }\n    //\n    mainHtmlText += `\n                <div class=\"tile_empty\"></div>\n                <div class=\"tile_empty\"></div>\n                <div class=\"tile_empty\"></div>\n                <div class=\"tile_empty\"></div>\n                <div class=\"tile_empty\"></div>\n                <div class=\"tile_empty\"></div>\n                <div class=\"tile_empty\"></div>\n                <div class=\"tile_empty\"></div>\n            </div>\n            <br>\n            <form>\n                <!-- 基本データここから -->\n                <div class=\"row\">\n                    <div class=\"col-md-6\">\n                    </div>\n                </div>\n                <!-- 基本データここまで -->\n                <!--  -->\n                <!--  -->`;\n    //\n    for( const { viewId, tableId, onePageMaxSize, viewType, childPageId } of views ){\n        switch( viewType ){\n            default:\n                mainHtmlText += await generateViewHTML( viewId, tableId, onePageMaxSize, childPageId );\n        }\n    }\n    //\n    mainHtmlText += `\n            </form>\n        </main>\n        <footer>\n            <div class=\"container\">\n                <br>\n                <br>\n            </div>\n        </footer>\n    </body>\n\n</html>`;\n    //\n    return mainHtmlText;\n","afterCode":""},{"functionNameJP":"HTMLエスケープ","functionNameEN":"escapeHTML","parametersName":["text"],"parametersDataType":["string"],"returnValue":"string","functionId":"01HN08ZW31CZFWRNBGW33DFM44","beforeCode":"\n\n\n\n\n// パンくずリストを生成する関数\nfunction _getBreadcrumbHTML({ breadcrumbs, pageId }){\n    let htmlText = \"\";\n    for( let i=0; i<breadcrumbs.length; i++ ){\n        const isLast = ( i === breadcrumbs.length-1 );\n        const { pageId, pageName } = breadcrumbs[i];\n        htmlText += `\n                <li class=\"breadcrumb-item${ isLast ? ' active' : '' }\" onclick=\"jumpWithQuery('/custom/${pageId}/index.html')\" >\n                    ${pageName}\n                </li>`;\n    }\n    return htmlText;\n}\n\n\n\n\n\n\n","innerCode":"\n  return text.replace(/[&'`\"<>]/g, function(match) {\n    return {\n      '&': '&amp;',\n      \"'\": '&#x27;',\n      '`': '&#x60;',\n      '\"': '&quot;',\n      '<': '&lt;',\n      '>': '&gt;',\n    }[match]\n  });\n","afterCode":""}]